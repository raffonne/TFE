export class SplitText{constructor(t,e){this.options={WORDS:"words",CHARS:"chars"},this.words=[],this.chars=[],this.elements=$(t),this.modes=e,this.init()}splitWords(t){let e=[];const s=[],i=this.searchTextNode(t);return $(t).empty(),$(i).each((t,s)=>{const i=s.textContent.split(" ");$(i.join(" @AYHAN_SPLITTED@").split("@AYHAN_SPLITTED@")).each((t,s)=>{let i="";" "==s.slice(-1)?(i=s.trim(),e.push(i),e.push(" ")):e.push(s.trim())})}),$(e).each((e,i)=>{if(" "==i.slice(-1))$(t).append(" ");else{const e=document.createElement("div"),h=document.createTextNode(i);$(e).css({position:"relative",display:"inline-block"}).append(h),$(t).append(e),s.push(e)}}),s}splitChars(t){let e=[];const s=this.searchTextNode(t);return $(t).empty(),$(s).each((t,s)=>{const i=s.textContent.split("");$(i).each((t,s)=>{let i=document.createElement("div");const h=document.createTextNode(s);$(i).css({position:"relative",display:"inline-block"}).append(h),e.push(i)})}),$(e).each((s,i)=>{" "==i.textContent.slice(-1)?($(t).append(" "),e.splice(s,0)):$(t).append(i)}),e}searchTextNode(t){let e=[];return $(t).contents().each((t,s)=>{"#text"==s.nodeName?" "!=s.textContent&&e.push(s):e=e.concat(this.searchTextNode(s))}),e}init(){$(this.elements).each((t,e)=>{this.modes.includes(this.options.WORDS)&&this.words.push(...this.splitWords(e)),this.modes.includes(this.options.CHARS)&&(this.words.length>0?$(this.words).each((t,e)=>{this.chars.push(...this.splitChars(e))}):this.chars.push(...this.splitChars(e)))})}}